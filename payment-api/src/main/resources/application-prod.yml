spring:
  datasource:
    master:
      url: jdbc:postgresql://localhost:15432/groom
      username: application
      password: application
      driver-class-name: org.postgresql.Driver
    replica:
      url: jdbc:postgresql://localhost:15433/groom
      username: application
      password: application
      driver-class-name: org.postgresql.Driver
      hikari:
        maximum-pool-size: 5
  jpa:
    hibernate:
      ddl-auto: none
      naming:
        implicit-strategy: org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
        physical-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
    properties:
      hibernate:
        format_sql: false  # SQL 포맷팅 비활성화 (성능 최적화)
        dialect: org.hibernate.dialect.PostgreSQLDialect
    show-sql: false  # SQL 출력 비활성화 (성능 최적화)

# ====================================
# prod 환경 로그 레벨 (프로덕션 환경)
# ====================================
logging:
  level:
    # ROOT 레벨 - WARN (최소한의 로그)
    root: WARN

    # 프로젝트 패키지 - INFO 레벨 (비즈니스 로직 추적)
    com.groom.ecommerce: INFO

    # Spring Framework - WARN (필수 로그만)
    org.springframework: WARN
    org.springframework.web: WARN
    org.springframework.security: WARN

    # Hibernate/JPA - SQL 로그 완전 비활성화 (성능 최적화)
    org.hibernate: WARN
    org.hibernate.SQL: OFF
    org.hibernate.orm.jdbc.bind: OFF
    org.hibernate.type.descriptor.sql: OFF

  file:
    path: ./logs

# Kafka Configuration (Production)
spring:
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:kafka-broker:9092}
    consumer:
      group-id: payment-service
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer
      properties:
        specific.avro.reader: true
        schema.registry.url: ${SCHEMA_REGISTRY_URL:http://schema-registry:8081}
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
      properties:
        schema.registry.url: ${SCHEMA_REGISTRY_URL:http://schema-registry:8081}

feign:
  clients:
    store-service:
      url: ${STORE_SERVICE_URL:http://store-service:8081}
      connect-timeout: 3000
      read-timeout: 3000
      logger-level: basic
  client:
    config:
      store-service:
        connectTimeout: 3000
        readTimeout: 3000
        loggerLevel: basic
