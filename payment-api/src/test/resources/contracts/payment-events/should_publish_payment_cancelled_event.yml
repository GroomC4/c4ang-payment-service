description: Payment Cancelled Event - 결제 취소 이벤트 발행
name: should_publish_payment_cancelled_event
label: payment_cancelled_event
input:
  triggeredBy: publishPaymentCancelledEvent()
outputMessage:
  sentTo: payment.cancelled
  headers:
    kafka_messageKey: "ORD-12347"
  body:
    eventId: "550e8400-e29b-41d4-a716-446655440002"
    eventTimestamp: 1699999999999
    paymentId: "PAY-12347"
    orderId: "ORD-12347"
    userId: "USER-003"
    cancellationReason: "STOCK_UNAVAILABLE"
    cancelledAt: 1699999999999
  matchers:
    body:
      - path: $.eventId
        type: by_regex
        value: "[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
      - path: $.eventTimestamp
        type: by_type
      - path: $.paymentId
        type: by_regex
        value: "PAY-[0-9]+"
      - path: $.orderId
        type: by_regex
        value: "ORD-[0-9]+"
      - path: $.cancelledAt
        type: by_type
